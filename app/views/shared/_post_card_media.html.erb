<%
  # メディア添付表示部分
  # パラメータ: media_attachments
%>

<div class="post-card-media-container">
  <% media_attachments.limit(4).each do |media| %>
    <div class="post-card-media-item">
      <% if media.image? %>
        <img src="<%= media.url %>" 
             alt="<%= media.description %>" 
             class="post-card-media-image"
             loading="lazy">
      <% elsif media.video? %>
        <video class="post-card-media-video" controls preload="auto">
          <source src="<%= media.url %>" type="<%= media.content_type %>">
          お使いのブラウザは動画の再生に対応していません。
        </video>
      <% else %>
        <div class="post-card-media-file">
          <svg class="post-card-media-file-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          <span class="post-card-media-file-name"><%= media.file_name %></span>
        </div>
      <% end %>
    </div>
  <% end %>
</div>